/* ===== iPod flotante (CATÁLOGO-CLONE, anclado a TOP-LEFT) ===== */
:root{
  --ipod-mini-width: 140px;                 /* tamaño base */
  --screen-left: 12%; --screen-top: 8%;
  --screen-w: 76%;  --screen-h: 28%;
  --wheel-top: 74%; --wheel-size: 56%;
}

/* iPod fijo como en catálogo (top-left) */
.ipod-photo{
  position: fixed;
  top: 12px; left: 12px; right: auto;       /* ⬅⬅ diferencia clave */
  z-index: 9999;
  width: var(--ipod-mini-width);
  aspect-ratio: 0.436;                      /* carcasa mini */
  background: url('/ipod/ipod.png') center/cover no-repeat; /* usa misma skin que catál. */
  pointer-events: auto; border-radius: 18px;
  -webkit-filter: drop-shadow(0 20px 6px rgba(0,0,0,.65)) drop-shadow(0 34px 18px rgba(0,0,0,.35));
  filter: drop-shadow(0 20px 6px rgba(0,0,0,.65)) drop-shadow(0 34px 18px rgba(0,0,0,.35));
}
.ipod-photo .overlay{
  position:absolute; inset:0; pointer-events:auto; color:#eee;
  font:600 11px/1.2 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
}

/* Pantalla del iPod (forzado igual que en catálogo) */
.ipod-screen{
  position:absolute; left:var(--screen-left); top:var(--screen-top);
  width:var(--screen-w); height:var(--screen-h);
  border-radius:4px; overflow:hidden; padding:4px;
  display:grid; grid-template-rows: 1fr auto; gap:4px;
  background:rgba(0,0,0,.05);
}

/* OVERRIDE crítico que tiene catálogo y falta en ipod.css de landing */
.ipod-screen{
  display:block !important;
  padding:0 !important;
  height:auto !important;
  aspect-ratio: 4 / 3;                      /* la clave para que el vídeo no “salte” */
  overflow:hidden; border-radius:4px;
  background:#000 !important;
}
.ipod-screen > div{ position:absolute; left:6px; right:6px; top:6px; pointer-events:none; }
#ipodVideo{ width:100%; height:100%; object-fit:cover; object-position:center; display:block; }

/* Textos (catálogo los oculta) */
.ipod-title, .ipod-artist{ display:none !important; }

/* Rueda + hotzones */
.ipod-wheel{
  position:absolute; left:50%; top:var(--wheel-top); transform:translate(-50%,-50%);
  width:var(--wheel-size); aspect-ratio:1; border-radius:50%; touch-action:none;
}
.ipod-hotzone{
  position:absolute; border:none; padding:0; background:transparent; cursor:pointer;
  width:30%; aspect-ratio:1; border-radius:50%; transform:translate(-50%,-50%);
  transition: transform .12s ease, filter .12s ease;
}
.ipod-hotzone.prev{ left:16%; top:50%; }
.ipod-hotzone.next{ left:84%; top:50%; }
.ipod-hotzone.play{ left:50%; top:88%; width:24%; aspect-ratio:1; border-radius:50%; }
.ipod-hotzone:focus-visible{ outline:none; box-shadow:0 0 0 2px rgba(255,255,255,.18) inset; }
.ipod-hotzone:active{ box-shadow:0 0 0 3px rgba(255,255,255,.22) inset; }

@media (min-width:769px) and (hover:hover) and (pointer:fine){
  .ipod-hotzone.is-pressing{ transform: translate(-50%,-50%) scale(.96); filter: brightness(.92); }
  .ipod-hotzone::after{
    content:""; position:absolute; inset:-14%; border-radius:50%; pointer-events:none;
    background: radial-gradient(closest-side, rgba(255,255,255,.22), rgba(255,255,255,0) 70%),
                radial-gradient(closest-side, rgba(0,0,0,.18), rgba(0,0,0,0) 75%);
    opacity:0; transform:scale(.85); transition: opacity .12s ease, transform .12s ease;
  }
  .ipod-hotzone.is-pressing::after{ opacity:1; transform:scale(1); }
  @keyframes ipod-pop{
    0%{ transform: translate(-50%,-50%) scale(.96); }
    60%{ transform: translate(-50%,-50%) scale(1.015); }
    100%{ transform: translate(-50%,-50%) scale(1); }
  }
  .ipod-hotzone.pop{ animation: ipod-pop .18s cubic-bezier(.2,.8,.2,1); }
}

/* Drawer (exacto al de catálogo) */
.music-drawer{ position:fixed; inset:0 auto 0 0; z-index:10050 !important; pointer-events:none; }
.music-drawer__trigger{
  position:fixed; left:0; top:50%; transform:translateY(-50%);
  width:54px; height:54px; border-radius:10px; padding:0; overflow:hidden; background:transparent;
  border:1px solid rgba(255,255,255,.14); display:block; cursor:pointer; pointer-events:auto;
  transition: box-shadow .18s ease, transform .18s ease, border-color .18s ease, opacity .18s ease; outline:none;
}
.music-drawer__trigger:hover, .music-drawer__trigger:focus-visible{
  transform: translateY(-50%) scale(1.02); box-shadow: 0 8px 24px rgba(0,0,0,.35); border-color: rgba(255,255,255,.28);
}
.music-drawer__icon{ width:100%; height:100%; display:block; object-fit:cover; border-radius:10px; }
.music-drawer__panel{
  position:fixed; left:0; top:0; bottom:0; width:min(360px, 92vw); transform: translateX(-100%); opacity:0;
  transition: transform .24s cubic-bezier(.2,.8,.2,1), opacity .18s ease; display:flex; align-items:center; padding-left:12px; pointer-events:none;
}
.music-drawer:has(.music-drawer__trigger:hover) .music-drawer__panel,
.music-drawer:has(.music-drawer__panel:hover) .music-drawer__panel{
  transform: translateX(0); opacity: 1; pointer-events: auto;
}
.music-drawer:has(.music-drawer__trigger:hover) .music-drawer__trigger,
.music-drawer:has(.music-drawer__panel:hover) .music-drawer__trigger{
  opacity:0; pointer-events:none;
}
/* iPod dentro del panel */
.music-drawer .ipod-photo{
  position:relative; top:auto; right:auto; left:auto; z-index:1;
  transform: translateX(-6px) scale(.98); opacity:.98;
  transition: transform .24s cubic-bezier(.2,.8,.2,1), opacity .2s ease;
  background: url('/ipod/ipod.png') center/cover no-repeat;
}
.music-drawer:has(.music-drawer__trigger:hover) .ipod-photo,
.music-drawer:has(.music-drawer__panel:hover) .ipod-photo{
  transform: translateX(0) scale(1); opacity:1;
}

@media (max-width:768px){
  .ipod-photo{ display:none !important; }
  .music-drawer{ display:none !important; }
}
