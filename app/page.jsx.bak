'use client';
import Link from 'next/link';
import { useRef, useState } from 'react';

export default function LandingPB() {
  const fondo = '/landing/FONDO.mp4';
  const fuego = '/landing/fuego.mp4'; // cuando tengas fuego.webm con alpha, cÃ¡mbialo

  // nombres ya SIN acentos ni espacios
  const senalShows = '/landing/SENAL_SHOWS_LARGA_FITTED.png';
  const senalMerch = '/landing/SENAL_MERCH.png';
  const senalPB    = '/landing/SENAL_PORTATE_BIEN.png';

  const fuegoRef = useRef<HTMLVideoElement | null>(null);
  const [errShows, setErrShows] = useState(false);
  const [errMerch, setErrMerch] = useState(false);
  const [errPB, setErrPB] = useState(false);

  return (
    <main>
      <video className="bg" src={fondo} autoPlay muted loop playsInline preload="auto" />

      <Link href="/shows" className="hit shows" aria-label="Ver shows">
        {!errShows ? (
          <img className="img" src={senalShows} alt="Shows"
               onError={() => { console.error('No carga', senalShows); setErrShows(true); }} />
        ) : <div className="fallback">SHOWS</div>}
      </Link>

      <div className="center">
        {!errPB ? (
          <img className="img" src={senalPB} alt="PÃ³rtate Bien"
               onError={() => { console.error('No carga', senalPB); setErrPB(true); }} />
        ) : <div className="fallback">PB</div>}

        <video
          ref={fuegoRef}
          className="fuego"
          src={fuego}
          autoPlay
          muted
          loop
          playsInline
          onError={() => { if (fuegoRef.current) fuegoRef.current.style.display = 'none'; }}
        />
      </div>

      <Link href="/catalogo" className="hit merch" aria-label="Ir a Merch">
        {!errMerch ? (
          <img className="img" src={senalMerch} alt="Merch"
               onError={() => { console.error('No carga', senalMerch); setErrMerch(true); }} />
        ) : <div className="fallback">MERCH</div>}
      </Link>

      <style jsx>{`
        main { position: relative; min-height: 100svh; overflow: hidden; background: #5c84d8; }
        .bg { position: fixed; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: 0; }

        .hit { position: absolute; z-index: 2; transform-origin: center bottom;
               transition: transform 200ms ease, filter 200ms ease; }
        .hit:hover { transform: translateZ(0) scale(1.04) rotate(0.2deg);
                     filter: drop-shadow(0 10px 24px rgba(0,0,0,.35)); }
        .img { display: block; width: 100%; height: auto; pointer-events: none; user-select: none; }

        .shows { left: 8vw; bottom: 8vh; width: min(30vw, 340px); rotate: -3deg; }
        .merch { right: 8vw; bottom: 6vh; width: min(28vw, 320px); rotate: 3deg; }

        .center { position: absolute; left: 50%; bottom: 4vh; transform: translateX(-50%);
                  width: min(50vw, 560px); z-index: 2; }
        .center .img { rotate: -2deg; }
        .fuego { position: absolute; left: 50%; top: -8%; transform: translateX(-50%);
                 width: 120%; height: auto; pointer-events: none; mix-blend-mode: screen; }

        .fallback { width: 100%; aspect-ratio: 1; background: #ff5252; color: #000;
                    font: 800 20px/1 system-ui; display: grid; place-items: center; border-radius: 10px; }

        @media (max-width: 640px) {
          .shows { left: 4vw; bottom: 10vh; width: 44vw; }
          .merch { right: 4vw; bottom: 8vh; width: 42vw; }
          .center { width: 76vw; bottom: 6vh; }
        }
      `}</style>
    </main>
  );
}
